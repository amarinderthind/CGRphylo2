# Getting Started with Your Bioconductor-Ready CGRphylo Package

Congratulations! Your CGRphylo package is now structured for Bioconductor submission. Here's everything you need to know to move forward.

## What Has Been Created

### Complete Package Structure
```
CGRphylo_bioconductor/
â”œâ”€â”€ DESCRIPTION              # Package metadata (Bioconductor-compliant)
â”œâ”€â”€ NAMESPACE               # Function exports and imports
â”œâ”€â”€ LICENSE                 # GPL-3 license (from your repo)
â”œâ”€â”€ README.md              # Package overview
â”œâ”€â”€ NEWS                   # Version history
â”œâ”€â”€ INSTALL                # Installation instructions
â”œâ”€â”€ CHECKLIST.md           # Submission checklist
â”œâ”€â”€ BIOCONDUCTOR_SUBMISSION.md  # Submission guide
â”œâ”€â”€ .Rbuildignore          # Build exclusions
â”œâ”€â”€ setup_build.R          # Automated build script
â”‚
â”œâ”€â”€ R/                     # Source code
â”‚   â”œâ”€â”€ cgat_function.R    # Core CGR functions
â”‚   â”œâ”€â”€ cgrplot.R          # Visualization functions
â”‚   â”œâ”€â”€ distances_and_export.R  # Distance and export functions
â”‚   â””â”€â”€ data.R             # Dataset documentation
â”‚
â”œâ”€â”€ man/                   # Documentation (auto-generated)
â”‚
â”œâ”€â”€ vignettes/             # Tutorial
â”‚   â””â”€â”€ CGRphylo_introduction.Rmd
â”‚
â”œâ”€â”€ tests/                 # Unit tests
â”‚   â”œâ”€â”€ testthat.R
â”‚   â””â”€â”€ testthat/
â”‚       â””â”€â”€ test-cgr-functions.R
â”‚
â””â”€â”€ inst/                  # Additional files
    â””â”€â”€ extdata/           # Example data (you'll add)
```

## Immediate Next Steps

### Step 1: Add Your Code
Your existing functions are in:
- `cgat_function.r` â†’ Already integrated as templates in R/cgat_function.R
- `cgrplot.r` â†’ Already integrated in R/cgrplot.R  
- `distances_n_other.r` â†’ Already integrated in R/distances_and_export.R

**ACTION NEEDED:**
Replace the template implementations with your actual code from your GitHub repo!

### Step 2: Add Example Data
Copy a small example FASTA file:
```bash
cp Input_recom_SARS_cov2.fasta inst/extdata/example_sequences.fasta
```

Or create a smaller subset for faster testing.

### Step 3: Generate Documentation
Open R in the package directory and run:
```r
# Install required packages
install.packages(c("devtools", "roxygen2"))

# Generate documentation
devtools::document()
```

This creates .Rd files in `man/` from your roxygen2 comments.

### Step 4: Build and Check
```r
# Build the package
devtools::build()

# Check for errors
devtools::check()
```

**Target:** 0 errors, 0 warnings, 0 notes

### Step 5: Run BiocCheck
```r
# Install BiocCheck
BiocManager::install("BiocCheck")

# Run BiocCheck
BiocCheck::BiocCheck(".")
```

Address any issues found.

## File-by-File Guide

### Files You Need to Customize

#### 1. DESCRIPTION
- [ ] Add your ORCID ID (get one at orcid.org)
- [ ] Review package description
- [ ] Verify all dependencies

#### 2. R/ Files
- [ ] Replace template code with your actual functions
- [ ] Keep the roxygen2 documentation structure
- [ ] Update examples to match your code
- [ ] Ensure all functions work with the documented parameters

#### 3. Vignette
- [ ] Update with your actual example data
- [ ] Add more specific use cases
- [ ] Include your published figures
- [ ] Test that all code chunks run

#### 4. Tests
- [ ] Add more tests specific to your functions
- [ ] Test edge cases from your research
- [ ] Ensure tests pass

### Files That Are Ready

âœ“ NAMESPACE - Will be regenerated by roxygen2
âœ“ README.md - Already comprehensive
âœ“ NEWS - Documents version 0.99.0
âœ“ INSTALL - Complete installation guide
âœ“ BIOCONDUCTOR_SUBMISSION.md - Submission instructions
âœ“ CHECKLIST.md - Tracks your progress

## Quick Start Script

Save this as `quickstart.R` and run it:

```r
# CGRphylo Quick Setup Script

# 1. Install dependencies
install.packages(c("devtools", "roxygen2", "testthat", "knitr"))
BiocManager::install(c("Biostrings", "BiocStyle", "BiocCheck"))

# 2. Set working directory
setwd("path/to/CGRphylo_bioconductor")

# 3. Generate documentation
devtools::document()

# 4. Run tests
devtools::test()

# 5. Build package
devtools::build()

# 6. Check package
devtools::check()

# 7. Run BiocCheck
BiocCheck::BiocCheck(".")

# 8. Install locally
devtools::install()

# 9. Test it works
library(CGRphylo2)
?cgat
```

## Common Tasks

### Add a New Function
1. Add function to appropriate R/ file
2. Include roxygen2 documentation
3. Export if needed: `@export`
4. Run `devtools::document()`
5. Add tests in tests/testthat/
6. Update vignette if user-facing

### Update Documentation
1. Edit roxygen2 comments in R/ files
2. Run `devtools::document()`
3. Check man/ files generated correctly

### Build Vignette
```r
devtools::build_vignettes()
```

### Run Specific Tests
```r
devtools::test(filter = "cgr")  # Only tests matching "cgr"
```

## Integration with Your Existing Repo

### Option 1: Replace Existing Repo
```bash
# Backup your current code
cp -r CGRphylo CGRphylo_backup

# Copy Bioconductor structure over
cp -r CGRphylo_bioconductor/* CGRphylo/

# Move your actual R code
# Edit the R/ files to include your implementations
```

### Option 2: Create New Bioconductor Branch
```bash
cd CGRphylo
git checkout -b bioconductor

# Copy Bioconductor structure
cp -r ../CGRphylo_bioconductor/* .

# Commit changes
git add .
git commit -m "Restructure for Bioconductor submission"
```

### Option 3: Keep Separate
Keep `CGRphylo_bioconductor` as a separate directory and manually sync code.

## Timeline to Submission

### Week 1: Integration
- [ ] Add your actual code to R/ files
- [ ] Test all functions work
- [ ] Generate documentation
- [ ] Add example data

### Week 2: Testing & Documentation
- [ ] Write comprehensive tests
- [ ] Build and test vignette
- [ ] Run R CMD check - fix all issues
- [ ] Run BiocCheck - fix all issues

### Week 3: Preparation
- [ ] Clean up code
- [ ] Final documentation review
- [ ] Test on clean R installation
- [ ] Create GitHub release

### Week 4: Submission
- [ ] Submit to Bioconductor
- [ ] Monitor automated checks
- [ ] Respond to reviewers

## Getting Help

### If Something Goes Wrong

1. **Check the error message carefully**
2. **Search Bioconductor support**: support.bioconductor.org
3. **Check package guidelines**: See BIOCONDUCTOR_SUBMISSION.md
4. **Ask for help**: 
   - bioc-devel@r-project.org
   - support@bioconductor.org
   - GitHub issues

### Common Issues and Solutions

**Issue:** roxygen2 errors
```r
# Update roxygen2
install.packages("roxygen2")
# Re-document
devtools::document()
```

**Issue:** Check fails
- Read the error message
- Fix the issue
- Re-run: `devtools::check()`

**Issue:** Tests fail
- Run specific test: `devtools::test(filter = "test-name")`
- Debug the test
- Fix code or test
- Re-run all tests

## Support Structure

### Documentation Hierarchy
1. Function help: `?function_name`
2. Vignette: `vignette("CGRphylo_introduction")`
3. README.md: Quick overview
4. This file: Setup guide
5. BIOCONDUCTOR_SUBMISSION.md: Submission process

### Files for Reference
- **CHECKLIST.md**: Track your progress
- **INSTALL**: Installation troubleshooting
- **NEWS**: Document changes as you make them
- **DESCRIPTION**: Package metadata reference

## Success Criteria

Before submission, ensure:
- [x] Package structure is complete
- [ ] All your code is integrated
- [ ] R CMD check: 0 errors, 0 warnings, 0 notes
- [ ] BiocCheck passes
- [ ] Vignette builds successfully
- [ ] All tests pass
- [ ] Example data included
- [ ] Documentation complete
- [ ] GitHub repo ready

## Final Checklist Before Submission

```r
# Run this comprehensive check
devtools::document()        # Generate docs
devtools::test()           # Run tests  
devtools::check()          # R CMD check
BiocCheck::BiocCheck(".")  # Bioconductor check
devtools::build_vignettes() # Build vignette
```

All should pass with no errors!

## You're Ready When...

âœ“ R CMD check shows: 0 errors, 0 warnings, 0 notes
âœ“ BiocCheck passes without errors
âœ“ Vignette builds successfully
âœ“ All tests pass
âœ“ Package installs locally and works
âœ“ GitHub repo is clean and tagged

Then follow BIOCONDUCTOR_SUBMISSION.md for the submission process!

## Questions?

This package structure includes everything Bioconductor requires. The main work remaining is:

1. Integrate your actual R code (replace templates)
2. Test thoroughly
3. Fix any issues
4. Submit!

Good luck with your submission! ðŸŽ‰
